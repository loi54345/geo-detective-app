function startNewRound() {
    // --- INIZIO BLOCCO DI DIAGNOSI ---
    console.log("Avvio di startNewRound. Modalità attiva:", activeGameMode);
    const streakCounter = document.getElementById('streak-counter');
    
    // Stampiamo nella console l'elemento che abbiamo trovato.
    console.log("Elemento #streak-counter trovato nel documento:", streakCounter);
    
    if (activeGameMode === 'CountryStreak') {
        // Verifichiamo se l'elemento esiste prima di provare a usarlo.
        if (streakCounter) {
            streakCounter.classList.remove('hidden');
            const spanElement = streakCounter.querySelector('span');
            
            // Stampiamo anche l'elemento span che troviamo al suo interno.
            console.log("Elemento <span> interno trovato:", spanElement);

            // Verifichiamo se lo span esiste prima di provare a scriverci dentro.
            if (spanElement) {
                spanElement.textContent = gameState.currentStreak;
            } else {
                console.error("ERRORE GRAVE: L'elemento <span> non è stato trovato dentro #streak-counter!");
            }
        } else {
            console.error("ERRORE GRAVE: L'elemento #streak-counter non è stato trovato nel DOM!");
        }
    } else {
        if (streakCounter) {
            streakCounter.classList.add('hidden');
        }
    }
    // --- FINE BLOCCO DI DIAGNOSI ---

    // Il resto della funzione rimane invariato
    document.getElementById('confirm-new-game-btn').classList.add('hidden');
    document.getElementById('loading-overlay').style.display = 'flex';
    document.getElementById('result-overlay').style.display = 'none';
    mapContainer.classList.remove('fullscreen', 'enlarged');
    
    submitBtn.textContent = 'Submit Guess';
    submitBtn.disabled = true;

    map.setCenter({ lat: 20, lng: 0 });
    map.setZoom(2);

    if (guessMarker) guessMarker.setVisible(false);
    if (actualMarker) actualMarker.setVisible(false);
    if (guessLine) guessLine.setMap(null);
    
    panorama.setOptions({ 
        linksControl: true, panControl: true, visible: false, 
        pov: {heading: Math.random() * 360, pitch: 0}, 
        zoom: 0 
    });

    findRandomStreetViewLocation();
}
